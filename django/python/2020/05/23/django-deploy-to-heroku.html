<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>How to deploy a Django Project to Heroku | Notes</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="How to deploy a Django Project to Heroku" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Deploy Django App to Heroku Quick Draft while deploying" />
<meta property="og:description" content="Deploy Django App to Heroku Quick Draft while deploying" />
<link rel="canonical" href="https://kekayan.github.io/notes/django/python/2020/05/23/django-deploy-to-heroku.html" />
<meta property="og:url" content="https://kekayan.github.io/notes/django/python/2020/05/23/django-deploy-to-heroku.html" />
<meta property="og:site_name" content="Notes" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-05-23T00:00:00-05:00" />
<script type="application/ld+json">
{"description":"Deploy Django App to Heroku Quick Draft while deploying","@type":"BlogPosting","headline":"How to deploy a Django Project to Heroku","dateModified":"2020-05-23T00:00:00-05:00","datePublished":"2020-05-23T00:00:00-05:00","url":"https://kekayan.github.io/notes/django/python/2020/05/23/django-deploy-to-heroku.html","mainEntityOfPage":{"@type":"WebPage","@id":"https://kekayan.github.io/notes/django/python/2020/05/23/django-deploy-to-heroku.html"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/notes/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://kekayan.github.io/notes/feed.xml" title="Notes" /><!-- the google_analytics_id gets auto inserted from the config file -->



<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-167413270-1','auto');ga('require','displayfeatures');ga('send','pageview');</script>

<link rel="shortcut icon" type="image/x-icon" href="/notes/images/favicon.ico"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>How to deploy a Django Project to Heroku | Notes</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="How to deploy a Django Project to Heroku" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Deploy Django App to Heroku Quick Draft while deploying" />
<meta property="og:description" content="Deploy Django App to Heroku Quick Draft while deploying" />
<link rel="canonical" href="https://kekayan.github.io/notes/django/python/2020/05/23/django-deploy-to-heroku.html" />
<meta property="og:url" content="https://kekayan.github.io/notes/django/python/2020/05/23/django-deploy-to-heroku.html" />
<meta property="og:site_name" content="Notes" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-05-23T00:00:00-05:00" />
<script type="application/ld+json">
{"description":"Deploy Django App to Heroku Quick Draft while deploying","@type":"BlogPosting","headline":"How to deploy a Django Project to Heroku","dateModified":"2020-05-23T00:00:00-05:00","datePublished":"2020-05-23T00:00:00-05:00","url":"https://kekayan.github.io/notes/django/python/2020/05/23/django-deploy-to-heroku.html","mainEntityOfPage":{"@type":"WebPage","@id":"https://kekayan.github.io/notes/django/python/2020/05/23/django-deploy-to-heroku.html"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

<link href="https://unpkg.com/@primer/css/dist/primer.css" rel="stylesheet" />
<link rel="stylesheet" href="//use.fontawesome.com/releases/v5.0.7/css/all.css"><link type="application/atom+xml" rel="alternate" href="https://kekayan.github.io/notes/feed.xml" title="Notes" /><!-- the google_analytics_id gets auto inserted from the config file -->



<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-167413270-1','auto');ga('require','displayfeatures');ga('send','pageview');</script>



<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head><body><header class="site-header">

  <div class="wrapper">
<a class="site-title" rel="author" href="/notes/">Notes</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger">
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewbox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
            </svg>
          </span>
        </label>

        <div class="trigger">
<a class="page-link" href="/notes/about/">About Me</a><a class="page-link" href="/notes/search/">Search</a><a class="page-link" href="/notes/categories/">Tags</a>
</div>
      </nav>
</div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">How to deploy a Django Project to Heroku</h1>
<p class="page-description">Deploy Django App to Heroku Quick Draft while deploying</p>
<p class="post-meta post-meta-title"><time class="dt-published" datetime="2020-05-23T00:00:00-05:00" itemprop="datePublished">
        May 23, 2020
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      4 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i> 
      
        <a class="category-tags-link" href="/notes/categories/#django">django</a>
         
      
        <a class="category-tags-link" href="/notes/categories/#python">python</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul class="section-nav">
<li class="toc-entry toc-h1">
<a href="#deploy-a-django-project-to-heroku-rocket">Deploy a Django Project to Heroku <img class="emoji" title=":rocket:" alt=":rocket:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f680.png" height="20" width="20"></a>
<ul>
<li class="toc-entry toc-h2"><a href="#prereqs-white_check_mark">Prereqs <img class="emoji" title=":white_check_mark:" alt=":white_check_mark:" src="https://github.githubassets.com/images/icons/emoji/unicode/2705.png" height="20" width="20"></a></li>
<li class="toc-entry toc-h2">
<a href="#heroku-cloud">Heroku <img class="emoji" title=":cloud:" alt=":cloud:" src="https://github.githubassets.com/images/icons/emoji/unicode/2601.png" height="20" width="20"></a>
<ul>
<li class="toc-entry toc-h3"><a href="#create-an-account-checkered_flag">Create an Account <img class="emoji" title=":checkered_flag:" alt=":checkered_flag:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f3c1.png" height="20" width="20"></a></li>
<li class="toc-entry toc-h3"><a href="#install-the-heroku-cli-checkered_flag">Install the Heroku CLI <img class="emoji" title=":checkered_flag:" alt=":checkered_flag:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f3c1.png" height="20" width="20"></a></li>
</ul>
</li>
<li class="toc-entry toc-h2">
<a href="#shaping-up-the-project-for-heroku-deploy">Shaping up the Project for Heroku deploy</a>
<ul>
<li class="toc-entry toc-h3"><a href="#gunicorn-gift">Gunicorn <img class="emoji" title=":gift:" alt=":gift:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f381.png" height="20" width="20"></a></li>
<li class="toc-entry toc-h3"><a href="#procfile-checkered_flag">Procfile <img class="emoji" title=":checkered_flag:" alt=":checkered_flag:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f3c1.png" height="20" width="20"></a></li>
<li class="toc-entry toc-h3"><a href="#django-heroku-gift">Django-heroku <img class="emoji" title=":gift:" alt=":gift:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f381.png" height="20" width="20"></a></li>
<li class="toc-entry toc-h3"><a href="#static_root-checkered_flag">STATIC_ROOT <img class="emoji" title=":checkered_flag:" alt=":checkered_flag:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f3c1.png" height="20" width="20"></a></li>
<li class="toc-entry toc-h3"><a href="#to-serve-static-files-we-need-whitenoise-gift">To serve static files we need whitenoise <img class="emoji" title=":gift:" alt=":gift:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f381.png" height="20" width="20"></a></li>
<li class="toc-entry toc-h3"><a href="#database-settings-using-dj-database-url-gift">Database settings using dj-database-url <img class="emoji" title=":gift:" alt=":gift:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f381.png" height="20" width="20"></a></li>
<li class="toc-entry toc-h3"><a href="#runtimetxt-checkered_flag">runtime.txt <img class="emoji" title=":checkered_flag:" alt=":checkered_flag:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f3c1.png" height="20" width="20"></a></li>
</ul>
</li>
<li class="toc-entry toc-h2">
<a href="#deployment-rocket">Deployment <img class="emoji" title=":rocket:" alt=":rocket:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f680.png" height="20" width="20"></a>
<ul>
<li class="toc-entry toc-h3"><a href="#login-to-heroku-checkered_flag">Login to heroku <img class="emoji" title=":checkered_flag:" alt=":checkered_flag:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f3c1.png" height="20" width="20"></a></li>
<li class="toc-entry toc-h3"><a href="#create-a-heroku-app-checkered_flag">create a Heroku App <img class="emoji" title=":checkered_flag:" alt=":checkered_flag:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f3c1.png" height="20" width="20"></a></li>
<li class="toc-entry toc-h3"><a href="#add-a-postgresql-database-to-your-app-gem">Add a PostgreSQL database to your app <img class="emoji" title=":gem:" alt=":gem:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f48e.png" height="20" width="20"></a></li>
<li class="toc-entry toc-h3">
<a href="#deploy-rocket">deploy <img class="emoji" title=":rocket:" alt=":rocket:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f680.png" height="20" width="20"></a>
<ul>
<li class="toc-entry toc-h4"><a href="#git-push-the-app">git push the app</a></li>
<li class="toc-entry toc-h4"><a href="#maigrate--database">maigrate  database</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#quick-note-warning">Quick Note <img class="emoji" title=":warning:" alt=":warning:" src="https://github.githubassets.com/images/icons/emoji/unicode/26a0.png" height="20" width="20"></a></li>
</ul>
</li>
</ul>
<h1 id="deploy-a-django-project-to-heroku-rocket">
<a class="anchor" href="#deploy-a-django-project-to-heroku-rocket" aria-hidden="true"><span class="octicon octicon-link"></span></a>Deploy a Django Project to Heroku <img class="emoji" title=":rocket:" alt=":rocket:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f680.png" height="20" width="20">
</h1>

<h2 id="prereqs-white_check_mark">
<a class="anchor" href="#prereqs-white_check_mark" aria-hidden="true"><span class="octicon octicon-link"></span></a>Prereqs <img class="emoji" title=":white_check_mark:" alt=":white_check_mark:" src="https://github.githubassets.com/images/icons/emoji/unicode/2705.png" height="20" width="20">
</h2>

<p>I ’ll assume that you have the familarity with the <code class="highlighter-rouge">Django</code> , <code class="highlighter-rouge">git</code> and have a project ready to deploy with it’s <code class="highlighter-rouge">requirements.txt</code>.
And read my article on <a href="https://kekayan.github.io/notes/django/python/2020/05/19/djang-getting-started.html">Inital setting up</a>
Meanwhile <img class="emoji" title=":thought_balloon:" alt=":thought_balloon:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f4ad.png" height="20" width="20"> wondering how to deploy so you can demo it to someone or just deploy to production.</p>

<h2 id="heroku-cloud">
<a class="anchor" href="#heroku-cloud" aria-hidden="true"><span class="octicon octicon-link"></span></a>Heroku <img class="emoji" title=":cloud:" alt=":cloud:" src="https://github.githubassets.com/images/icons/emoji/unicode/2601.png" height="20" width="20">
</h2>
<p>Heroku is a cloud <img class="emoji" title=":cloud:" alt=":cloud:" src="https://github.githubassets.com/images/icons/emoji/unicode/2601.png" height="20" width="20"> application platform, a Platform-as-a-Service (PaaS). 
I feel Heroku is a great option to deploy our side projects and demos as a hobby dev. Also it has PostgreSQL Relational Database to try out free.</p>

<h3 id="create-an-account-checkered_flag">
<a class="anchor" href="#create-an-account-checkered_flag" aria-hidden="true"><span class="octicon octicon-link"></span></a>Create an Account <img class="emoji" title=":checkered_flag:" alt=":checkered_flag:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f3c1.png" height="20" width="20">
</h3>
<p>If you don’t already have an account Please Sign up <a href="https://signup.heroku.com/">here</a> for an account.
It’s free and simple.</p>

<h3 id="install-the-heroku-cli-checkered_flag">
<a class="anchor" href="#install-the-heroku-cli-checkered_flag" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install the Heroku CLI <img class="emoji" title=":checkered_flag:" alt=":checkered_flag:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f3c1.png" height="20" width="20">
</h3>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl https://cli-assets.heroku.com/install.sh | sh
</code></pre></div></div>
<p>if you want to know more on how to install CLI please check <a href="https://devcenter.heroku.com/articles/heroku-cli#download-and-install">here</a></p>

<h2 id="shaping-up-the-project-for-heroku-deploy">
<a class="anchor" href="#shaping-up-the-project-for-heroku-deploy" aria-hidden="true"><span class="octicon octicon-link"></span></a>Shaping up the Project for Heroku deploy</h2>
<p>Heroku needs the information about our app to run.So 
We have to do few changes and add some thing to our project.</p>

<h3 id="gunicorn-gift">
<a class="anchor" href="#gunicorn-gift" aria-hidden="true"><span class="octicon octicon-link"></span></a>Gunicorn <img class="emoji" title=":gift:" alt=":gift:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f381.png" height="20" width="20">
</h3>

<p>Gunicorn ‘Green Unicorn’ is a Python WSGI HTTP Server for UNIX. 
It helps the Heroku to deploy our application across various “workers.”</p>

<p>so in our <code class="highlighter-rouge">requirements.txt</code>
we have to add <code class="highlighter-rouge">gunicorn</code>.
and if you want to locally install you can</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip <span class="nb">install </span>gunicorn
</code></pre></div></div>
<p>also if you already don’t have a <code class="highlighter-rouge">requirements.txt</code> .You can create one by</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip freeze <span class="o">&gt;</span> requirements.txt
</code></pre></div></div>
<p>in your virtual environment.</p>

<h3 id="procfile-checkered_flag">
<a class="anchor" href="#procfile-checkered_flag" aria-hidden="true"><span class="octicon octicon-link"></span></a>Procfile <img class="emoji" title=":checkered_flag:" alt=":checkered_flag:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f3c1.png" height="20" width="20">
</h3>
<p>Procfile is unique for heroku. We have to add it in our project’s root directory.It basically tells Heroku how our app should start and run.</p>

<p>You can manually create a procfile or run</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s1">'web: gunicorn config.wsgi --log-file -'</span> <span class="o">&gt;</span> Procfile
</code></pre></div></div>
<p>Here <code class="highlighter-rouge">config</code> is my app which has the <code class="highlighter-rouge">wsgi.py</code> file.If you read my article <a href="https://kekayan.github.io/notes/django/python/2020/05/19/djang-getting-started.html">here</a>.You will know why i name my app as config.</p>

<p>So here we are telling heroku it’s a web app with gunicorn server and the starting point is <code class="highlighter-rouge">wsgi.py</code> from <code class="highlighter-rouge">config</code> dir or app.</p>

<p>So you will need to replace it with <code class="highlighter-rouge">your_project_name.wsgi</code></p>

<h3 id="django-heroku-gift">
<a class="anchor" href="#django-heroku-gift" aria-hidden="true"><span class="octicon octicon-link"></span></a>Django-heroku <img class="emoji" title=":gift:" alt=":gift:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f381.png" height="20" width="20">
</h3>
<p>Heroku has created a python module called django-heroku that helps with settings, testing, and logging automatically.</p>

<p>same as Gunicorn it also has be to added to our 
<code class="highlighter-rouge">requirements.txt</code> as <code class="highlighter-rouge">django-heroku</code>.</p>

<p>we have add these two lines to our <code class="highlighter-rouge">settings.py</code>.
first import it at the top</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">django_heroku</span>
</code></pre></div></div>
<p>and in the bottom call the method.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">django_heroku</span><span class="o">.</span><span class="n">settings</span><span class="p">(</span><span class="nb">locals</span><span class="p">())</span>
</code></pre></div></div>
<h3 id="static_root-checkered_flag">
<a class="anchor" href="#static_root-checkered_flag" aria-hidden="true"><span class="octicon octicon-link"></span></a>STATIC_ROOT <img class="emoji" title=":checkered_flag:" alt=":checkered_flag:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f3c1.png" height="20" width="20">
</h3>

<p>So again in <code class="highlighter-rouge">settings.py</code> let’s add some changes belwo the variable called <code class="highlighter-rouge">STATIC_URL</code>. Let’s add the <code class="highlighter-rouge">STATIC_ROOT</code></p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">STATIC_URL</span> <span class="o">=</span> <span class="s">'/static/'</span>
<span class="n">STATIC_ROOT</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s">'static'</span><span class="p">)</span>
</code></pre></div></div>

<p>and some people create project directory as <code class="highlighter-rouge">PROJECT_DIR</code> variable and use it instead of <code class="highlighter-rouge">BASE_DIR</code>.So it will be</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">PROJECT_DIR</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">__file__</span><span class="p">))</span>
<span class="n">STATIC_URL</span> <span class="o">=</span> <span class="s">'/static/'</span>
<span class="n">STATIC_ROOT</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">PROJECT_ROOT</span><span class="p">,</span> <span class="s">'static'</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="to-serve-static-files-we-need-whitenoise-gift">
<a class="anchor" href="#to-serve-static-files-we-need-whitenoise-gift" aria-hidden="true"><span class="octicon octicon-link"></span></a>To serve static files we need whitenoise <img class="emoji" title=":gift:" alt=":gift:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f381.png" height="20" width="20">
</h3>
<p>We need to add <code class="highlighter-rouge">whitenoise</code> to our <code class="highlighter-rouge">requirements.txt</code> file as well.
To install in environment</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip install whitenoise
</code></pre></div></div>
<p>Now edit the <code class="highlighter-rouge">settings.py</code> file and add <code class="highlighter-rouge">WhiteNoise</code> to the <code class="highlighter-rouge">MIDDLEWARE</code> list as following.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">MIDDLEWARE</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s">'django.middleware.security.SecurityMiddleware'</span><span class="p">,</span>
  <span class="s">'whitenoise.middleware.WhiteNoiseMiddleware'</span><span class="p">,</span>
  <span class="c1"># ...
</span><span class="p">]</span>
</code></pre></div></div>
<p>The WhiteNoise middleware should be placed directly after the Django SecurityMiddleware and before all other middleware.</p>

<p>now add it below <code class="highlighter-rouge">STATIC_ROOT</code> in the the <code class="highlighter-rouge">settings.py</code> .</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">STATICFILES_STORAGE</span> <span class="o">=</span> <span class="s">'whitenoise.storage.CompressedManifestStaticFilesStorage'</span>
</code></pre></div></div>

<h3 id="database-settings-using-dj-database-url-gift">
<a class="anchor" href="#database-settings-using-dj-database-url-gift" aria-hidden="true"><span class="octicon octicon-link"></span></a>Database settings using dj-database-url <img class="emoji" title=":gift:" alt=":gift:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f381.png" height="20" width="20">
</h3>

<p>Add the following to the bottom of <code class="highlighter-rouge">settings.py</code>:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">dj_database_url</span>
<span class="n">DATABASES</span><span class="p">[</span><span class="s">'default'</span><span class="p">]</span> <span class="o">=</span> <span class="n">dj_database_url</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">conn_max_age</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span> <span class="n">ssl_require</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div></div>
<p>here you can find more on <a href="https://kekayan.github.io/notes/django/python/2020/05/19/djang-getting-started.html">my article</a> on that and also heroku doc<a href="https://devcenter.heroku.com/articles/heroku-postgresql#connecting-with-django">doc</a>
and add <code class="highlighter-rouge">psycopg2-binary</code> and <code class="highlighter-rouge">dj-database-url</code> to your <code class="highlighter-rouge">requirements.txt</code> file as well.</p>

<h3 id="runtimetxt-checkered_flag">
<a class="anchor" href="#runtimetxt-checkered_flag" aria-hidden="true"><span class="octicon octicon-link"></span></a>runtime.txt <img class="emoji" title=":checkered_flag:" alt=":checkered_flag:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f3c1.png" height="20" width="20">
</h3>
<p>We have to create a file <code class="highlighter-rouge">runtime.txt</code> in the project root to specify the correct Python version .
If you use cli it will be</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s1">'python-3.8.2'</span> <span class="o">&gt;</span> runtime.txt
</code></pre></div></div>
<p>or you can create the file using ide and mention your python version.</p>

<h2 id="deployment-rocket">
<a class="anchor" href="#deployment-rocket" aria-hidden="true"><span class="octicon octicon-link"></span></a>Deployment <img class="emoji" title=":rocket:" alt=":rocket:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f680.png" height="20" width="20">
</h2>

<p>First <code class="highlighter-rouge">git</code> commit the changes .</p>
<h3 id="login-to-heroku-checkered_flag">
<a class="anchor" href="#login-to-heroku-checkered_flag" aria-hidden="true"><span class="octicon octicon-link"></span></a>Login to heroku <img class="emoji" title=":checkered_flag:" alt=":checkered_flag:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f3c1.png" height="20" width="20">
</h3>
<p>Inside out project root</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>heroku login
</code></pre></div></div>
<p>It will ask to click a link to login using web browser .</p>

<h3 id="create-a-heroku-app-checkered_flag">
<a class="anchor" href="#create-a-heroku-app-checkered_flag" aria-hidden="true"><span class="octicon octicon-link"></span></a>create a Heroku App <img class="emoji" title=":checkered_flag:" alt=":checkered_flag:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f3c1.png" height="20" width="20">
</h3>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>heroku create demo-app
</code></pre></div></div>

<h3 id="add-a-postgresql-database-to-your-app-gem">
<a class="anchor" href="#add-a-postgresql-database-to-your-app-gem" aria-hidden="true"><span class="octicon octicon-link"></span></a>Add a PostgreSQL database to your app <img class="emoji" title=":gem:" alt=":gem:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f48e.png" height="20" width="20">
</h3>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>heroku addons:create heroku-postgresql:hobby-dev
</code></pre></div></div>
<p>You have to go your  <a href="https://id.heroku.com/login">Heroku Dashboard</a> and access your recently created app (demo-app).</p>

<p>Click on the Settings menu and then on the button Reveal Config Vars and your <code class="highlighter-rouge">SECRET_KEY</code> below the database url and <code class="highlighter-rouge">DEBUG</code>  to false if it’s not default false.</p>

<h3 id="deploy-rocket">
<a class="anchor" href="#deploy-rocket" aria-hidden="true"><span class="octicon octicon-link"></span></a>deploy <img class="emoji" title=":rocket:" alt=":rocket:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f680.png" height="20" width="20">
</h3>

<h4 id="git-push-the-app">
<a class="anchor" href="#git-push-the-app" aria-hidden="true"><span class="octicon octicon-link"></span></a>git push the app</h4>
<p>now push the commited git to heroku master</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git push heroku master
</code></pre></div></div>
<h4 id="maigrate--database">
<a class="anchor" href="#maigrate--database" aria-hidden="true"><span class="octicon octicon-link"></span></a>maigrate  database</h4>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>heroku run maigrate
</code></pre></div></div>
<p>You have deployed your app now <img class="emoji" title=":tada:" alt=":tada:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f389.png" height="20" width="20"> <img class="emoji" title=":tada:" alt=":tada:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f389.png" height="20" width="20"> <img class="emoji" title=":tada:" alt=":tada:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f389.png" height="20" width="20"></p>
<h2 id="quick-note-warning">
<a class="anchor" href="#quick-note-warning" aria-hidden="true"><span class="octicon octicon-link"></span></a>Quick Note <img class="emoji" title=":warning:" alt=":warning:" src="https://github.githubassets.com/images/icons/emoji/unicode/26a0.png" height="20" width="20">
</h2>

<p><strong>I did this post while i was deploying incase if you find any mistake or stuck please let me know on twitter or  .</strong> <img class="emoji" title=":envelope:" alt=":envelope:" src="https://github.githubassets.com/images/icons/emoji/unicode/2709.png" height="20" width="20">  <a href="mailto:notkekayan@gmail.com">email</a></p>

  </div>
<a class="u-url" href="/notes/django/python/2020/05/23/django-deploy-to-heroku.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/notes/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/notes/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/notes/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>My Personal Notes</p>
      </div>
    </div>

    <div class="social-links">
<ul class="social-media-list">
<li><a rel="me" href="https://github.com/kekayan" title="kekayan"><svg class="svg-icon grey"><use xlink:href="/notes/assets/minima-social-icons.svg#github"></use></svg></a></li>
<li><a rel="me" href="https://twitter.com/dneutr0n" title="dneutr0n"><svg class="svg-icon grey"><use xlink:href="/notes/assets/minima-social-icons.svg#twitter"></use></svg></a></li>
</ul>
</div>

  </div>

</footer>
</body>

</html>
